# SPDX-FileCopyrightText: 2025 NONE
#
# SPDX-License-Identifier: Unlicense

apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  name: minio
spec:
  targetNamespace: minio
  install:
    createNamespace: true
  chart:
    spec:
      chart: minio
      version: 5.*
      sourceRef:
        kind: HelmRepository
        name: minio
  interval: 10m0s
  values:
    mode: standalone
    existingSecret: minio-creds
    persistence:
      enabled: true
      size: 500Gi
    resources:
      requests:
        memory: 4Gi
    service:
      type: ClusterIP
    consoleService:
      type: ClusterIP
    ingress:
      enabled: true
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        cert-manager.io/cluster-issuer: ca
        cert-manager.io/common-name: api.minio.ajphome.com
      hosts:
      - api.minio.ajphome.com
      tls:
      - secretName: minio-tls
        hosts:
        - api.minio.ajphome.com
    consoleIngress:
      enabled: true
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        cert-manager.io/cluster-issuer: ca
        cert-manager.io/common-name: minio.ajphome.com
      hosts:
      - minio.ajphome.com
      tls:
      - secretName: minio-console-tls
        hosts:
        - minio.ajphome.com
